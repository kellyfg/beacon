<table class="table data-table">
  <thead>
  <tr>
    <th>Assigned to</th>
    <th>Person</th>
    <th>Need
      <%= link_to 'Asc', @params.merge(order: 'name', order_dir: 'ASC') %>
      <%= link_to 'Desc', @params.merge(order: 'name', order_dir: 'DESC') %>
    </th>
    <th>Status</th>
    <th>Vulnerable</th>
    <th>Category
      <%= link_to 'Asc', @params.merge(order: 'category', order_dir: 'ASC') %>
      <%= link_to 'Desc', @params.merge(order: 'category', order_dir: 'DESC') %>
    </th>
    <th>Date logged
      <%= link_to 'Asc', @params.merge(order: 'created_at', order_dir: 'ASC') %>
      <%= link_to 'Desc', @params.merge(order: 'created_at', order_dir: 'DESC') %>
    </th>
  </tr>
  </thead>
  <tbody>
  <% needs.each do |need| %>
    <tr>
      <% if need.user %>
        <td><%= need.user_name %></td>
      <% else %>
        <td>Unassigned</td>
      <% end %>
      <td><%= link_to(need.contact_name, contact_path(need.contact.id)) %></td>
      <td><strong><%= link_to need.name, need %></strong></td>
      <td><%= status(need.completed_on) %></td>
      <td>
        <% if need.contact_is_vulnerable %>
          <%= image_tag "red-tick.svg", alt: "vulnerable" %>
        <% else %>
          â€”
        <% end %>
      </td>
      <td><%= need.category %>
      <td><%= format_datetime(need.created_at) %></td>
    </tr>
  <% end %>
  </tbody>
</table>

<%= paginate(@needs) %>