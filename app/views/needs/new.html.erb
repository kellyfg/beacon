<div class="sidenav">
  <h3>Call List</h3>
  <a href="#personal-details">Personal Details</a>
  <% needs.each_with_index do |need, index| %>
    <a href="#<%= need.parameterize %>"><%= need %></a>
  <% end %>
  <a href="#contact">Other</a>
</div>

<ol class="breadcrumb">
  <li><%= link_to "People in need", contacts_path %></li>
  <li><%= link_to "Needs", contacts_path %></li>
  <li>Add needs</li>
</ol>

<a id="personal-details"></a>
<div class="page-header">
  <h1 class="page-title">Personal Details</h1>
</div>
<%= render 'contacts/form', contact: @contact %>

<fieldset class="field-section field-section--two-cols">
  <legend><h2 class="field-section__title">Can you speak english?</h2></legend>

  <div class="field field--span-two-cols">
    <div class="checkbox">
      <%= radio_button_tag :can_speak_english, true, false, { class: "checkbox__input" } %>
      <%= label_tag 'can_speak_english_true', 'Yes', class: "checkbox__label" %>
    </div>
    <div class="checkbox">
      <%= radio_button_tag :can_speak_english, false, false, { class: "checkbox__input" } %>
      <%= label_tag 'can_speak_english_false', 'No', class: "checkbox__label" %>
    </div>
  </div>

  <div class="field field--span-two-cols">
    <%= label_tag :additional_info, 'If \'No\' please state preferred language', class: "field__label" %>
    <%= text_field_tag :additional_info %>
  </div>
</fieldset>

<fieldset class="field-section field-section--two-cols">
  <legend><h2 class="field-section__title">Do you have access to the internet</h2></legend>

  <div class="field field--span-two-cols">
    <div class="checkbox">
      <%= radio_button_tag :access_internet, true, false, { class: "checkbox__input" } %>
      <%= label_tag :access_internet, 'Yes', class: "checkbox__label" %>
    </div>
    <div class="checkbox">
      <%= radio_button_tag :access_internet, false, false, { class: "checkbox__input" } %>
      <%= label_tag :access_internet, 'No', class: "checkbox__label" %>
    </div>
  </div>
</fieldset>

<div class="page-header">
  <h1 class="page-title">Add needs</h1>
</div>

<%= form_with(model: [@contacts, @needs], url: contact_needs_path, local: true, class: "margin-bottom-70 two-thirds") do |form| %>
  <% needs.each_with_index do |need, index| %>
    <a class="anchor-point" id="<%= need.parameterize %>" href="#"></a>
    <fieldset class="field-section">
      <%= form.hidden_field "needs_list[#{index}][name]", :value => need.parameterize.underscore, :id => "needs_name_#{index}" %>
      
      <legend class="field-section__title"><h3><%= need %></h3></legend>
      
      <div class="radio">
        <%= form.radio_button "needs_list[#{index}][active]", true, :id => "needs_active_#{index}_true" %>
        <label for="needs_active_<%= index %>_true" class="radio__label">Yes</label>
      </div>
      
      <div class="radio">
        <%= form.radio_button "needs_list[#{index}][active]", false, :id => "needs_active_#{index}_false" %>
        <label for="needs_active_<%= index %>_false" class="radio__label">No</label>
      </div>

      <div class="field">
        <label for="<%= "needs_desc_#{index}" %>" class="field__label">Describe more about how we can help</label>
        <%= form.text_area "needs_list[#{index}][description]", :id => "needs_desc_#{index}" %>
      </div>

      <div class="checkbox">
        <%= form.check_box "needs_list[#{index}][is_urgent]", :id => "needs_is_urgent_#{index}", class: 'checkbox__input' %>
        <label for="<%= "needs_is_urgent_#{index}" %>" class="checkbox__label">Urgent need</label>
      </div>

      <br/>
      <%= render :partial => "#{need.parameterize.underscore}" rescue nil %>
    </fieldset>
  <% end %>

  <div class="field">
    <%= form.label :other_need, class: "field__label" %>
    <%= form.text_field :other_need %>
  </div>

  <div class="actions">
    <%= form.submit "Submit" %>
  </div>
<% end %>

<%= javascript_pack_tag 'navbar' %>